function AutoValidator(a,b){this.container=a,this.errorContainer=b,this.validators=[],this.form=void 0,this.init(),this.makeValidators()}function ValidableForm(a){this.container=a,this.errorContainer=void 0,this.validators=[],this.valid=!0}function Validator(a,b){this.name=a,this.element=b,this.valid=!0,this.errorMessage="{0} is not valid."}function CustomValidator(a,b,c,d){Validator.call(this,a,b),this.fn=c,this.valueFn=d}function RegexpValidator(a,b,c){Validator.call(this,a,b),this.regexp=c}function EmailValidator(a,b){var c=/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i;RegexpValidator.call(this,a,b,c),this.regexp=c,this.errorMessage="{0} is not valid e-mail address."}function RequiredValidator(a,b){Validator.call(this,a,b),this.errorMessage="{0} is required."}AutoValidator.prototype.addValidator=function(a){this.validators.push(a),this.form.addValidator(a)},AutoValidator.prototype.init=function(){this.form=new ValidableForm(this.container),this.errorContainer&&this.form.setErrorContainer(this.errorContainer),this.form.watchButtons()},AutoValidator.prototype.makeValidators=function(){var a=this;this.container.querySelectorAll("[data-validator-required]").forEach(function(){var b=new RequiredValidator(this.dataset.name,this);this.dataset.validatorRequiredError&&(b.errorMessage=this.dataset.validatorRequiredError),a.addValidator(b)}),this.container.querySelectorAll("[data-validator-regexp]").forEach(function(){var b=new RegexpValidator(this.dataset.name,this,this.dataset.validatorRegexp);this.dataset.validatorRegexpError&&(b.errorMessage=this.dataset.validatorRegexpError),a.addValidator(b)}),this.container.querySelectorAll("[data-validator-email]").forEach(function(){var b=new EmailValidator(this.dataset.name,this);this.dataset.validatorEmailError&&(b.errorMessage=this.dataset.validatorEmailError),a.addValidator(b)}),this.container.querySelectorAll("[data-validator-custom]").forEach(function(){var b=new CustomValidator(this.dataset.name,this,window[this.dataset.validatorCustom]);this.dataset.validatorCustomError&&(b.errorMessage=this.dataset.validatorCustomError),a.addValidator(b)})},document.one=document.querySelector.bind(document),Node.prototype.one=function(a){return this.querySelector(a)},document.all=document.querySelectorAll.bind(document),Node.prototype.all=function(a){return this.querySelectorAll(a)},Node.prototype.addClass=function(a){var b=this.className.split(" ");b.indexOf(a)<0&&b.push(a),this.className=b.join(" ")},Node.prototype.removeClass=function(a){var b=this.className.split(" "),c=b.indexOf(a);c>=0&&b.splice(c,1),this.className=b.join(" ")},Node.prototype.hasClass=function(a){return this.className.split(" ").indexOf(a)>=0},Node.prototype.toggleClass=function(a){this.hasClass(a)?this.removeClass(a):this.addClass(a)},Node.prototype.createElement=function(a,b,c){var d=document.createElement(a);return"string"==typeof b&&""!==b&&(d.innerHTML=b),"function"==typeof c&&c(d),this},Node.prototype.prependElement=function(a,b,c){var d=this;return this.createElement(a,b,function(a){d.prependChild(a),"function"==typeof c&&c(a)}),this},Node.prototype.appendElement=function(a,b,c){var d=this;return this.createElement(a,b,function(a){d.appendChild(a),"function"==typeof c&&c(a)}),this},Node.prototype.appendTo=function(a){return a.appendChild(this),this},Node.prototype.prependChild=function(a){this.childNodes.length>0?this.insertBefore(a,this.childNodes[0]):this.appendChild(a)},Node.prototype.on=window.on=function(a,b){return this.addEventListener(a,b),this},NodeList.prototype.on=function(a,b){var c;for(c=0;c<this.length;c++)this[c].on(a,b)},NodeList.prototype.forEach=function(a){var b;for(b=0;b<this.length;b++)a.call(this[b])},String.prototype.inArray=function(a){return a.indexOf(this)>=0},String.prototype.equals=function(){var a,b=!1;for(a=0;!b&&a<arguments.length;a++)this.toString()===arguments[a]&&(b=!0);return b},String.prototype.format=function(){var a,b=this;for(a=0;a<arguments.length;a++)b=b.replace(new RegExp("\\{"+a+"\\}","gm"),arguments[a]);return b},function(a){a.fn.validableForm=function(b){a(this).each(function(){new AutoValidator(this,a(this).find(b)[0])})}}(jQuery),ValidableForm.prototype.addValidator=function(a){function b(){a.valid||c.validate()}var c=this;this.validators.push(a),a.element.on("keyup",b),a.element.on("change",b)},ValidableForm.prototype.validate=function(){var a,b;this.valid=!0,"undefined"!=typeof this.errorContainer&&(this.errorContainer.innerHTML="");for(a in this.validators)this.validators[a].test()===!1&&(this.valid=!1,"undefined"!=typeof this.errorContainer&&(b=document.createElement("div"),b.className="error",b.innerHTML=this.validators[a].getErrorMessage(),this.errorContainer.appendChild(b)));return this.valid?this.errorContainer.removeClass("has-errors"):this.errorContainer.addClass("has-errors"),this.valid},ValidableForm.prototype.setErrorContainer=function(a){this.errorContainer=a},ValidableForm.prototype.watchButtons=function(){var a=this;this.container.all("input[type=submit]").on("click",function(b){a.validate(),a.valid||b.preventDefault()})},Validator.prototype.test=function(){return this.valid=this.validate(),this.valid?this.element.removeClass("error"):this.element.addClass("error"),this.valid},Validator.prototype.validate=function(){return!1},Validator.prototype.getErrorMessage=function(){return this.errorMessage.format(this.name)},Validator.prototype.getValue=function(){var a,b=this.element.tagName.toLowerCase(),c=this.element.type.toLowerCase();return"input"===b&&"checkbox"===c?a=this.element.checked:("input"===b&&c.equals("text","password","email")||"textarea"===b)&&(a=this.element.value),a},CustomValidator.prototype=Object.create(Validator.prototype),CustomValidator.prototype.constructor=CustomValidator,CustomValidator.prototype.validate=function(){return this.fn(this.getValue())},CustomValidator.prototype.getValue=function(){var a;return a="undefined"==typeof this.valueFn?Validator.prototype.getValue.apply(this,arguments):this.valueFn.apply(this,arguments)},RegexpValidator.prototype=Object.create(Validator.prototype),RegexpValidator.prototype.constructor=RegexpValidator,RegexpValidator.prototype.validate=function(){var a=!0,b=this.element.tagName.toLowerCase(),c=this.element.type.toLowerCase();return("input"===b&&c.equals("text","password","email")||"textarea"===b)&&(this.element.value.match(this.regexp)||(a=!1)),a},EmailValidator.prototype=Object.create(RegexpValidator.prototype),EmailValidator.prototype.constructor=EmailValidator,RequiredValidator.prototype=Object.create(Validator.prototype),RequiredValidator.prototype.constructor=RequiredValidator,RequiredValidator.prototype.validate=function(){var a=this.getValue(),b=(this.element.tagName.toLowerCase(),this.element.type.toLowerCase(),"string"==typeof a&&""!==a||"boolean"==typeof a&&a);return b};